{"version":3,"file":"useServerFn.js","sources":["../../src/useServerFn.ts"],"sourcesContent":["import * as React from 'react'\nimport { isRedirect } from '@tanstack/router-core'\nimport { useRouter } from '@tanstack/react-router'\n\nexport function useServerFn<T extends (...deps: Array<any>) => Promise<any>>(\n  serverFn: T,\n): (...args: Parameters<T>) => ReturnType<T> {\n  const router = useRouter()\n\n  return React.useCallback(\n    async (...args: Array<any>) => {\n      try {\n        const res = await serverFn(...args)\n\n        if (isRedirect(res)) {\n          throw res\n        }\n\n        return res\n      } catch (err) {\n        if (isRedirect(err)) {\n          err.options._fromLocation = router.state.location\n          return router.navigate(router.resolveRedirect(err).options)\n        }\n\n        throw err\n      }\n    },\n    [router, serverFn],\n  ) as any\n}\n"],"names":[],"mappings":";;;AAIO,SAAS,YACd,UAC2C;AAC3C,QAAM,SAAS,UAAU;AAEzB,SAAO,MAAM;AAAA,IACX,UAAU,SAAqB;AACzB,UAAA;AACF,cAAM,MAAM,MAAM,SAAS,GAAG,IAAI;AAE9B,YAAA,WAAW,GAAG,GAAG;AACb,gBAAA;AAAA,QAAA;AAGD,eAAA;AAAA,eACA,KAAK;AACR,YAAA,WAAW,GAAG,GAAG;AACf,cAAA,QAAQ,gBAAgB,OAAO,MAAM;AACzC,iBAAO,OAAO,SAAS,OAAO,gBAAgB,GAAG,EAAE,OAAO;AAAA,QAAA;AAGtD,cAAA;AAAA,MAAA;AAAA,IAEV;AAAA,IACA,CAAC,QAAQ,QAAQ;AAAA,EACnB;AACF;"}